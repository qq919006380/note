{"id":"R/wa","dependencies":[{"name":"C:\\Users\\Administrator\\Desktop\\在线备忘录\\package.json","includedInParent":true,"mtime":1537366842828},{"name":"../../less/note.less","loc":{"line":1,"column":8},"parent":"C:\\Users\\Administrator\\Desktop\\在线备忘录\\src\\js\\mod\\note.js","resolved":"C:\\Users\\Administrator\\Desktop\\在线备忘录\\src\\less\\note.less"},{"name":"./toast.js","loc":{"line":3,"column":20},"parent":"C:\\Users\\Administrator\\Desktop\\在线备忘录\\src\\js\\mod\\note.js","resolved":"C:\\Users\\Administrator\\Desktop\\在线备忘录\\src\\js\\mod\\toast.js"},{"name":"./event.js","loc":{"line":4,"column":20},"parent":"C:\\Users\\Administrator\\Desktop\\在线备忘录\\src\\js\\mod\\note.js","resolved":"C:\\Users\\Administrator\\Desktop\\在线备忘录\\src\\js\\mod\\event.js"}],"generated":{"js":"require(\"../../less/note.less\");var t=require(\"./toast.js\").Toast,e=require(\"./event.js\");function o(t){this.initOpts(t),this.createNote(),this.setStyle(),this.bindEvent()}o.prototype={colors:[[\"#ea9b35\",\"#efb04e\"],[\"#dd598b\",\"#e672a2\"],[\"#eee34b\",\"#f2eb67\"],[\"#c24226\",\"#d15a39\"],[\"#c1c341\",\"#d0d25c\"],[\"#3f78c3\",\"#5591d2\"]],defaultOpts:{id:\"\",$ct:$(\"#content\").length>0?$(\"#content\"):$(\"body\"),context:\"input here\"},initOpts:function(t){this.opts=$.extend({},this.defaultOpts,t||{}),this.opts.id&&(this.id=this.opts.id)},createNote:function(){this.$note=$('<div class=\"note\"><div class=\"note-head\"><span class=\"username\"></span><span class=\"delete\">&times;</span></div><div class=\"note-ct\" contenteditable=\"true\"></div></div>'),this.$note.find(\".note-ct\").text(this.opts.context),this.$note.find(\".username\").text(this.opts.username),this.opts.$ct.append(this.$note),this.id||this.$note.css(\"bottom\",\"10px\")},setStyle:function(){var t=this.colors[Math.floor(6*Math.random())];this.$note.find(\".note-head\").css(\"background-color\",t[0]),this.$note.find(\".note-ct\").css(\"background-color\",t[1])},setLayout:function(){this.clk&&clearTimeout(this.clk),this.clk=setTimeout(function(){e.fire(\"waterfall\")},100)},bindEvent:function(){var t=this,e=this.$note,o=e.find(\".note-head\"),s=e.find(\".note-ct\");e.find(\".delete\").on(\"click\",function(){t.delete()}),s.on(\"focus\",function(){\"input here\"==s.html()&&s.html(\"\"),s.data(\"before\",s.html())}).on(\"blur paste\",function(){s.data(\"before\")!=s.html()&&(s.data(\"before\",s.html()),t.setLayout(),t.id?t.edit(s.html()):t.add(s.html()))}),o.on(\"mousedown\",function(t){var o=t.pageX-e.offset().left,s=t.pageY-e.offset().top;e.addClass(\"draggable\").data(\"evtPos\",{x:o,y:s})}).on(\"mouseup\",function(){e.removeClass(\"draggable\").removeData(\"pos\")}),$(\"body\").on(\"mousemove\",function(t){$(\".draggable\").length&&$(\".draggable\").offset({top:t.pageY-$(\".draggable\").data(\"evtPos\").y,left:t.pageX-$(\".draggable\").data(\"evtPos\").x})})},edit:function(e){$.post(\"/api/notes/edit\",{id:this.id,note:e}).done(function(e){0===e.status?t(\"update success\"):t(e.errorMsg)})},add:function(o){console.log(\"addd...\");var s=this;$.post(\"/api/notes/add\",{note:o}).done(function(o){0===o.status?t(\"add success\"):(s.$note.remove(),e.fire(\"waterfall\"),t(o.errorMsg))})},delete:function(){var o=this;$.post(\"/api/notes/delete\",{id:this.id}).done(function(s){0===s.status?(t(\"delete success\"),o.$note.remove(),e.fire(\"waterfall\")):t(s.errorMsg)})}},module.exports.Note=o;","map":{"mappings":[{"source":"..\\mod\\note.js","name":"require","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"..\\mod\\note.js","original":{"line":1,"column":8},"generated":{"line":1,"column":8}},{"source":"..\\mod\\note.js","original":{"line":3,"column":0},"generated":{"line":1,"column":32}},{"source":"..\\mod\\note.js","name":"Toast","original":{"line":3,"column":4},"generated":{"line":1,"column":36}},{"source":"..\\mod\\note.js","name":"require","original":{"line":3,"column":12},"generated":{"line":1,"column":38}},{"source":"..\\mod\\note.js","original":{"line":3,"column":20},"generated":{"line":1,"column":46}},{"source":"..\\mod\\note.js","name":"Toast","original":{"line":3,"column":34},"generated":{"line":1,"column":60}},{"source":"..\\mod\\note.js","name":"Event","original":{"line":4,"column":4},"generated":{"line":1,"column":66}},{"source":"..\\mod\\note.js","name":"require","original":{"line":4,"column":12},"generated":{"line":1,"column":68}},{"source":"..\\mod\\note.js","original":{"line":4,"column":20},"generated":{"line":1,"column":76}},{"source":"..\\mod\\note.js","original":{"line":6,"column":0},"generated":{"line":1,"column":90}},{"source":"..\\mod\\note.js","name":"Note","original":{"line":6,"column":9},"generated":{"line":1,"column":99}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":6,"column":14},"generated":{"line":1,"column":101}},{"source":"..\\mod\\note.js","name":"initOpts","original":{"line":7,"column":7},"generated":{"line":1,"column":104}},{"source":"..\\mod\\note.js","name":"initOpts","original":{"line":7,"column":7},"generated":{"line":1,"column":109}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":7,"column":16},"generated":{"line":1,"column":118}},{"source":"..\\mod\\note.js","name":"createNote","original":{"line":8,"column":7},"generated":{"line":1,"column":121}},{"source":"..\\mod\\note.js","name":"createNote","original":{"line":8,"column":7},"generated":{"line":1,"column":126}},{"source":"..\\mod\\note.js","name":"setStyle","original":{"line":9,"column":7},"generated":{"line":1,"column":139}},{"source":"..\\mod\\note.js","name":"setStyle","original":{"line":9,"column":7},"generated":{"line":1,"column":144}},{"source":"..\\mod\\note.js","name":"bindEvent","original":{"line":10,"column":7},"generated":{"line":1,"column":155}},{"source":"..\\mod\\note.js","name":"bindEvent","original":{"line":10,"column":7},"generated":{"line":1,"column":160}},{"source":"..\\mod\\note.js","name":"Note","original":{"line":12,"column":0},"generated":{"line":1,"column":172}},{"source":"..\\mod\\note.js","name":"prototype","original":{"line":12,"column":5},"generated":{"line":1,"column":174}},{"source":"..\\mod\\note.js","original":{"line":12,"column":17},"generated":{"line":1,"column":184}},{"source":"..\\mod\\note.js","original":{"line":13,"column":10},"generated":{"line":1,"column":185}},{"source":"..\\mod\\note.js","original":{"line":13,"column":10},"generated":{"line":1,"column":192}},{"source":"..\\mod\\note.js","original":{"line":14,"column":4},"generated":{"line":1,"column":193}},{"source":"..\\mod\\note.js","original":{"line":14,"column":5},"generated":{"line":1,"column":194}},{"source":"..\\mod\\note.js","original":{"line":14,"column":15},"generated":{"line":1,"column":204}},{"source":"..\\mod\\note.js","original":{"line":15,"column":5},"generated":{"line":1,"column":215}},{"source":"..\\mod\\note.js","original":{"line":15,"column":5},"generated":{"line":1,"column":216}},{"source":"..\\mod\\note.js","original":{"line":15,"column":15},"generated":{"line":1,"column":226}},{"source":"..\\mod\\note.js","original":{"line":16,"column":4},"generated":{"line":1,"column":237}},{"source":"..\\mod\\note.js","original":{"line":16,"column":5},"generated":{"line":1,"column":238}},{"source":"..\\mod\\note.js","original":{"line":16,"column":15},"generated":{"line":1,"column":248}},{"source":"..\\mod\\note.js","original":{"line":17,"column":4},"generated":{"line":1,"column":259}},{"source":"..\\mod\\note.js","original":{"line":17,"column":5},"generated":{"line":1,"column":260}},{"source":"..\\mod\\note.js","original":{"line":17,"column":15},"generated":{"line":1,"column":270}},{"source":"..\\mod\\note.js","original":{"line":18,"column":4},"generated":{"line":1,"column":281}},{"source":"..\\mod\\note.js","original":{"line":18,"column":5},"generated":{"line":1,"column":282}},{"source":"..\\mod\\note.js","original":{"line":18,"column":15},"generated":{"line":1,"column":292}},{"source":"..\\mod\\note.js","original":{"line":19,"column":4},"generated":{"line":1,"column":303}},{"source":"..\\mod\\note.js","original":{"line":19,"column":5},"generated":{"line":1,"column":304}},{"source":"..\\mod\\note.js","original":{"line":19,"column":15},"generated":{"line":1,"column":314}},{"source":"..\\mod\\note.js","original":{"line":22,"column":15},"generated":{"line":1,"column":326}},{"source":"..\\mod\\note.js","original":{"line":22,"column":15},"generated":{"line":1,"column":338}},{"source":"..\\mod\\note.js","original":{"line":23,"column":8},"generated":{"line":1,"column":339}},{"source":"..\\mod\\note.js","original":{"line":23,"column":8},"generated":{"line":1,"column":342}},{"source":"..\\mod\\note.js","name":"$","original":{"line":24,"column":9},"generated":{"line":1,"column":345}},{"source":"..\\mod\\note.js","name":"$","original":{"line":24,"column":9},"generated":{"line":1,"column":349}},{"source":"..\\mod\\note.js","original":{"line":24,"column":11},"generated":{"line":1,"column":351}},{"source":"..\\mod\\note.js","name":"length","original":{"line":24,"column":23},"generated":{"line":1,"column":363}},{"source":"..\\mod\\note.js","original":{"line":24,"column":30},"generated":{"line":1,"column":370}},{"source":"..\\mod\\note.js","name":"$","original":{"line":24,"column":32},"generated":{"line":1,"column":372}},{"source":"..\\mod\\note.js","original":{"line":24,"column":34},"generated":{"line":1,"column":374}},{"source":"..\\mod\\note.js","name":"$","original":{"line":24,"column":46},"generated":{"line":1,"column":386}},{"source":"..\\mod\\note.js","original":{"line":24,"column":48},"generated":{"line":1,"column":388}},{"source":"..\\mod\\note.js","original":{"line":25,"column":13},"generated":{"line":1,"column":396}},{"source":"..\\mod\\note.js","original":{"line":25,"column":13},"generated":{"line":1,"column":404}},{"source":"..\\mod\\note.js","original":{"line":28,"column":12},"generated":{"line":1,"column":418}},{"source":"..\\mod\\note.js","original":{"line":28,"column":12},"generated":{"line":1,"column":427}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":28,"column":22},"generated":{"line":1,"column":436}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":29,"column":9},"generated":{"line":1,"column":439}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":29,"column":9},"generated":{"line":1,"column":444}},{"source":"..\\mod\\note.js","name":"$","original":{"line":29,"column":16},"generated":{"line":1,"column":449}},{"source":"..\\mod\\note.js","name":"extend","original":{"line":29,"column":18},"generated":{"line":1,"column":451}},{"source":"..\\mod\\note.js","original":{"line":29,"column":25},"generated":{"line":1,"column":458}},{"source":"..\\mod\\note.js","original":{"line":29,"column":29},"generated":{"line":1,"column":461}},{"source":"..\\mod\\note.js","name":"defaultOpts","original":{"line":29,"column":34},"generated":{"line":1,"column":466}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":29,"column":47},"generated":{"line":1,"column":478}},{"source":"..\\mod\\note.js","original":{"line":29,"column":53},"generated":{"line":1,"column":481}},{"source":"..\\mod\\note.js","original":{"line":30,"column":7},"generated":{"line":1,"column":485}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":30,"column":12},"generated":{"line":1,"column":490}},{"source":"..\\mod\\note.js","name":"id","original":{"line":30,"column":17},"generated":{"line":1,"column":495}},{"source":"..\\mod\\note.js","name":"id","original":{"line":31,"column":12},"generated":{"line":1,"column":500}},{"source":"..\\mod\\note.js","name":"id","original":{"line":31,"column":12},"generated":{"line":1,"column":505}},{"source":"..\\mod\\note.js","original":{"line":31,"column":17},"generated":{"line":1,"column":508}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":31,"column":22},"generated":{"line":1,"column":513}},{"source":"..\\mod\\note.js","name":"id","original":{"line":31,"column":27},"generated":{"line":1,"column":518}},{"source":"..\\mod\\note.js","original":{"line":35,"column":14},"generated":{"line":1,"column":523}},{"source":"..\\mod\\note.js","original":{"line":35,"column":14},"generated":{"line":1,"column":534}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":40,"column":9},"generated":{"line":1,"column":545}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":40,"column":9},"generated":{"line":1,"column":550}},{"source":"..\\mod\\note.js","name":"$","original":{"line":40,"column":17},"generated":{"line":1,"column":556}},{"source":"..\\mod\\note.js","original":{"line":36,"column":15},"generated":{"line":1,"column":558}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":41,"column":9},"generated":{"line":1,"column":730}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":41,"column":9},"generated":{"line":1,"column":735}},{"source":"..\\mod\\note.js","name":"find","original":{"line":41,"column":15},"generated":{"line":1,"column":741}},{"source":"..\\mod\\note.js","original":{"line":41,"column":20},"generated":{"line":1,"column":746}},{"source":"..\\mod\\note.js","name":"text","original":{"line":41,"column":32},"generated":{"line":1,"column":758}},{"source":"..\\mod\\note.js","original":{"line":41,"column":37},"generated":{"line":1,"column":763}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":41,"column":42},"generated":{"line":1,"column":768}},{"source":"..\\mod\\note.js","name":"context","original":{"line":41,"column":47},"generated":{"line":1,"column":773}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":42,"column":9},"generated":{"line":1,"column":782}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":42,"column":9},"generated":{"line":1,"column":787}},{"source":"..\\mod\\note.js","name":"find","original":{"line":42,"column":15},"generated":{"line":1,"column":793}},{"source":"..\\mod\\note.js","original":{"line":42,"column":20},"generated":{"line":1,"column":798}},{"source":"..\\mod\\note.js","name":"text","original":{"line":42,"column":33},"generated":{"line":1,"column":811}},{"source":"..\\mod\\note.js","original":{"line":42,"column":38},"generated":{"line":1,"column":816}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":42,"column":43},"generated":{"line":1,"column":821}},{"source":"..\\mod\\note.js","name":"username","original":{"line":42,"column":48},"generated":{"line":1,"column":826}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":43,"column":9},"generated":{"line":1,"column":836}},{"source":"..\\mod\\note.js","name":"opts","original":{"line":43,"column":9},"generated":{"line":1,"column":841}},{"source":"..\\mod\\note.js","name":"$ct","original":{"line":43,"column":14},"generated":{"line":1,"column":846}},{"source":"..\\mod\\note.js","name":"append","original":{"line":43,"column":18},"generated":{"line":1,"column":850}},{"source":"..\\mod\\note.js","original":{"line":43,"column":25},"generated":{"line":1,"column":857}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":43,"column":30},"generated":{"line":1,"column":862}},{"source":"..\\mod\\note.js","original":{"line":44,"column":8},"generated":{"line":1,"column":869}},{"source":"..\\mod\\note.js","name":"id","original":{"line":44,"column":13},"generated":{"line":1,"column":874}},{"source":"..\\mod\\note.js","original":{"line":44,"column":18},"generated":{"line":1,"column":878}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":44,"column":23},"generated":{"line":1,"column":883}},{"source":"..\\mod\\note.js","name":"css","original":{"line":44,"column":29},"generated":{"line":1,"column":889}},{"source":"..\\mod\\note.js","original":{"line":44,"column":33},"generated":{"line":1,"column":893}},{"source":"..\\mod\\note.js","original":{"line":44,"column":43},"generated":{"line":1,"column":902}},{"source":"..\\mod\\note.js","original":{"line":47,"column":12},"generated":{"line":1,"column":911}},{"source":"..\\mod\\note.js","original":{"line":47,"column":12},"generated":{"line":1,"column":920}},{"source":"..\\mod\\note.js","name":"color","original":{"line":48,"column":8},"generated":{"line":1,"column":931}},{"source":"..\\mod\\note.js","name":"color","original":{"line":48,"column":8},"generated":{"line":1,"column":935}},{"source":"..\\mod\\note.js","original":{"line":48,"column":16},"generated":{"line":1,"column":937}},{"source":"..\\mod\\note.js","name":"colors","original":{"line":48,"column":21},"generated":{"line":1,"column":942}},{"source":"..\\mod\\note.js","name":"Math","original":{"line":48,"column":28},"generated":{"line":1,"column":949}},{"source":"..\\mod\\note.js","name":"floor","original":{"line":48,"column":33},"generated":{"line":1,"column":954}},{"source":"..\\mod\\note.js","original":{"line":48,"column":53},"generated":{"line":1,"column":960}},{"source":"..\\mod\\note.js","name":"Math","original":{"line":48,"column":39},"generated":{"line":1,"column":962}},{"source":"..\\mod\\note.js","name":"random","original":{"line":48,"column":44},"generated":{"line":1,"column":967}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":49,"column":9},"generated":{"line":1,"column":978}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":49,"column":9},"generated":{"line":1,"column":983}},{"source":"..\\mod\\note.js","name":"find","original":{"line":49,"column":15},"generated":{"line":1,"column":989}},{"source":"..\\mod\\note.js","original":{"line":49,"column":20},"generated":{"line":1,"column":994}},{"source":"..\\mod\\note.js","name":"css","original":{"line":49,"column":34},"generated":{"line":1,"column":1008}},{"source":"..\\mod\\note.js","original":{"line":49,"column":38},"generated":{"line":1,"column":1012}},{"source":"..\\mod\\note.js","name":"color","original":{"line":49,"column":58},"generated":{"line":1,"column":1031}},{"source":"..\\mod\\note.js","original":{"line":49,"column":64},"generated":{"line":1,"column":1033}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":50,"column":9},"generated":{"line":1,"column":1037}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":50,"column":9},"generated":{"line":1,"column":1042}},{"source":"..\\mod\\note.js","name":"find","original":{"line":50,"column":15},"generated":{"line":1,"column":1048}},{"source":"..\\mod\\note.js","original":{"line":50,"column":20},"generated":{"line":1,"column":1053}},{"source":"..\\mod\\note.js","name":"css","original":{"line":50,"column":32},"generated":{"line":1,"column":1065}},{"source":"..\\mod\\note.js","original":{"line":50,"column":36},"generated":{"line":1,"column":1069}},{"source":"..\\mod\\note.js","name":"color","original":{"line":50,"column":56},"generated":{"line":1,"column":1088}},{"source":"..\\mod\\note.js","original":{"line":50,"column":62},"generated":{"line":1,"column":1090}},{"source":"..\\mod\\note.js","original":{"line":53,"column":13},"generated":{"line":1,"column":1095}},{"source":"..\\mod\\note.js","original":{"line":53,"column":13},"generated":{"line":1,"column":1105}},{"source":"..\\mod\\note.js","original":{"line":54,"column":15},"generated":{"line":1,"column":1116}},{"source":"..\\mod\\note.js","name":"clk","original":{"line":55,"column":12},"generated":{"line":1,"column":1121}},{"source":"..\\mod\\note.js","name":"self","original":{"line":56,"column":19},"generated":{"line":1,"column":1126}},{"source":"..\\mod\\note.js","original":{"line":54,"column":15},"generated":{"line":1,"column":1139}},{"source":"..\\mod\\note.js","name":"clk","original":{"line":56,"column":24},"generated":{"line":1,"column":1144}},{"source":"..\\mod\\note.js","original":{"line":54,"column":15},"generated":{"line":1,"column":1149}},{"source":"..\\mod\\note.js","name":"clk","original":{"line":58,"column":9},"generated":{"line":1,"column":1154}},{"source":"..\\mod\\note.js","name":"setTimeout","original":{"line":58,"column":15},"generated":{"line":1,"column":1158}},{"source":"..\\mod\\note.js","original":{"line":58,"column":26},"generated":{"line":1,"column":1169}},{"source":"..\\mod\\note.js","name":"fire","original":{"line":59,"column":12},"generated":{"line":1,"column":1180}},{"source":"..\\mod\\note.js","name":"fire","original":{"line":59,"column":12},"generated":{"line":1,"column":1182}},{"source":"..\\mod\\note.js","original":{"line":59,"column":17},"generated":{"line":1,"column":1187}},{"source":"..\\mod\\note.js","original":{"line":60,"column":6},"generated":{"line":1,"column":1201}},{"source":"..\\mod\\note.js","original":{"line":63,"column":13},"generated":{"line":1,"column":1207}},{"source":"..\\mod\\note.js","original":{"line":63,"column":13},"generated":{"line":1,"column":1217}},{"source":"..\\mod\\note.js","name":"self","original":{"line":64,"column":8},"generated":{"line":1,"column":1228}},{"source":"..\\mod\\note.js","name":"self","original":{"line":64,"column":8},"generated":{"line":1,"column":1232}},{"source":"..\\mod\\note.js","original":{"line":64,"column":15},"generated":{"line":1,"column":1234}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":65,"column":8},"generated":{"line":1,"column":1239}},{"source":"..\\mod\\note.js","original":{"line":65,"column":16},"generated":{"line":1,"column":1241}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":65,"column":21},"generated":{"line":1,"column":1246}},{"source":"..\\mod\\note.js","name":"$noteHead","original":{"line":66,"column":8},"generated":{"line":1,"column":1252}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":66,"column":20},"generated":{"line":1,"column":1254}},{"source":"..\\mod\\note.js","name":"find","original":{"line":66,"column":26},"generated":{"line":1,"column":1256}},{"source":"..\\mod\\note.js","original":{"line":66,"column":31},"generated":{"line":1,"column":1261}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":67,"column":8},"generated":{"line":1,"column":1275}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":67,"column":18},"generated":{"line":1,"column":1277}},{"source":"..\\mod\\note.js","name":"find","original":{"line":67,"column":24},"generated":{"line":1,"column":1279}},{"source":"..\\mod\\note.js","original":{"line":67,"column":29},"generated":{"line":1,"column":1284}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":68,"column":18},"generated":{"line":1,"column":1296}},{"source":"..\\mod\\note.js","name":"find","original":{"line":68,"column":24},"generated":{"line":1,"column":1298}},{"source":"..\\mod\\note.js","original":{"line":68,"column":29},"generated":{"line":1,"column":1303}},{"source":"..\\mod\\note.js","name":"on","original":{"line":70,"column":12},"generated":{"line":1,"column":1314}},{"source":"..\\mod\\note.js","original":{"line":70,"column":15},"generated":{"line":1,"column":1317}},{"source":"..\\mod\\note.js","original":{"line":70,"column":24},"generated":{"line":1,"column":1325}},{"source":"..\\mod\\note.js","name":"delete","original":{"line":71,"column":11},"generated":{"line":1,"column":1336}},{"source":"..\\mod\\note.js","name":"delete","original":{"line":71,"column":11},"generated":{"line":1,"column":1338}},{"source":"..\\mod\\note.js","name":"on","original":{"line":75,"column":12},"generated":{"line":1,"column":1349}},{"source":"..\\mod\\note.js","name":"on","original":{"line":75,"column":12},"generated":{"line":1,"column":1351}},{"source":"..\\mod\\note.js","original":{"line":75,"column":15},"generated":{"line":1,"column":1354}},{"source":"..\\mod\\note.js","original":{"line":75,"column":24},"generated":{"line":1,"column":1362}},{"source":"..\\mod\\note.js","original":{"line":76,"column":25},"generated":{"line":1,"column":1373}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":76,"column":9},"generated":{"line":1,"column":1387}},{"source":"..\\mod\\note.js","name":"html","original":{"line":76,"column":17},"generated":{"line":1,"column":1389}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":76,"column":39},"generated":{"line":1,"column":1397}},{"source":"..\\mod\\note.js","name":"html","original":{"line":76,"column":47},"generated":{"line":1,"column":1399}},{"source":"..\\mod\\note.js","original":{"line":76,"column":52},"generated":{"line":1,"column":1404}},{"source":"..\\mod\\note.js","name":"data","original":{"line":77,"column":14},"generated":{"line":1,"column":1408}},{"source":"..\\mod\\note.js","name":"data","original":{"line":77,"column":14},"generated":{"line":1,"column":1410}},{"source":"..\\mod\\note.js","original":{"line":77,"column":19},"generated":{"line":1,"column":1415}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":77,"column":29},"generated":{"line":1,"column":1424}},{"source":"..\\mod\\note.js","name":"html","original":{"line":77,"column":37},"generated":{"line":1,"column":1426}},{"source":"..\\mod\\note.js","name":"on","original":{"line":78,"column":7},"generated":{"line":1,"column":1436}},{"source":"..\\mod\\note.js","original":{"line":78,"column":10},"generated":{"line":1,"column":1439}},{"source":"..\\mod\\note.js","original":{"line":78,"column":24},"generated":{"line":1,"column":1452}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":79,"column":10},"generated":{"line":1,"column":1463}},{"source":"..\\mod\\note.js","name":"data","original":{"line":79,"column":18},"generated":{"line":1,"column":1465}},{"source":"..\\mod\\note.js","original":{"line":79,"column":23},"generated":{"line":1,"column":1470}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":79,"column":36},"generated":{"line":1,"column":1481}},{"source":"..\\mod\\note.js","name":"html","original":{"line":79,"column":44},"generated":{"line":1,"column":1483}},{"source":"..\\mod\\note.js","name":"data","original":{"line":80,"column":16},"generated":{"line":1,"column":1492}},{"source":"..\\mod\\note.js","name":"data","original":{"line":80,"column":16},"generated":{"line":1,"column":1494}},{"source":"..\\mod\\note.js","original":{"line":80,"column":21},"generated":{"line":1,"column":1499}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":80,"column":30},"generated":{"line":1,"column":1508}},{"source":"..\\mod\\note.js","name":"html","original":{"line":80,"column":38},"generated":{"line":1,"column":1510}},{"source":"..\\mod\\note.js","name":"setLayout","original":{"line":81,"column":13},"generated":{"line":1,"column":1518}},{"source":"..\\mod\\note.js","name":"setLayout","original":{"line":81,"column":13},"generated":{"line":1,"column":1520}},{"source":"..\\mod\\note.js","name":"self","original":{"line":82,"column":11},"generated":{"line":1,"column":1532}},{"source":"..\\mod\\note.js","name":"id","original":{"line":82,"column":16},"generated":{"line":1,"column":1534}},{"source":"..\\mod\\note.js","name":"edit","original":{"line":83,"column":15},"generated":{"line":1,"column":1537}},{"source":"..\\mod\\note.js","name":"edit","original":{"line":83,"column":15},"generated":{"line":1,"column":1539}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":83,"column":20},"generated":{"line":1,"column":1544}},{"source":"..\\mod\\note.js","name":"html","original":{"line":83,"column":28},"generated":{"line":1,"column":1546}},{"source":"..\\mod\\note.js","name":"add","original":{"line":85,"column":15},"generated":{"line":1,"column":1554}},{"source":"..\\mod\\note.js","name":"add","original":{"line":85,"column":15},"generated":{"line":1,"column":1556}},{"source":"..\\mod\\note.js","name":"$noteCt","original":{"line":85,"column":19},"generated":{"line":1,"column":1560}},{"source":"..\\mod\\note.js","name":"html","original":{"line":85,"column":27},"generated":{"line":1,"column":1562}},{"source":"..\\mod\\note.js","name":"on","original":{"line":91,"column":14},"generated":{"line":1,"column":1573}},{"source":"..\\mod\\note.js","name":"on","original":{"line":91,"column":14},"generated":{"line":1,"column":1575}},{"source":"..\\mod\\note.js","original":{"line":91,"column":17},"generated":{"line":1,"column":1578}},{"source":"..\\mod\\note.js","original":{"line":91,"column":30},"generated":{"line":1,"column":1590}},{"source":"..\\mod\\note.js","name":"e","original":{"line":91,"column":39},"generated":{"line":1,"column":1599}},{"source":"..\\mod\\note.js","name":"evtX","original":{"line":92,"column":10},"generated":{"line":1,"column":1602}},{"source":"..\\mod\\note.js","name":"evtX","original":{"line":92,"column":10},"generated":{"line":1,"column":1606}},{"source":"..\\mod\\note.js","name":"e","original":{"line":92,"column":17},"generated":{"line":1,"column":1608}},{"source":"..\\mod\\note.js","name":"pageX","original":{"line":92,"column":19},"generated":{"line":1,"column":1610}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":92,"column":27},"generated":{"line":1,"column":1616}},{"source":"..\\mod\\note.js","name":"offset","original":{"line":92,"column":33},"generated":{"line":1,"column":1618}},{"source":"..\\mod\\note.js","name":"left","original":{"line":92,"column":42},"generated":{"line":1,"column":1627}},{"source":"..\\mod\\note.js","name":"e","original":{"line":93,"column":17},"generated":{"line":1,"column":1632}},{"source":"..\\mod\\note.js","name":"e","original":{"line":93,"column":17},"generated":{"line":1,"column":1634}},{"source":"..\\mod\\note.js","name":"pageY","original":{"line":93,"column":19},"generated":{"line":1,"column":1636}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":93,"column":27},"generated":{"line":1,"column":1642}},{"source":"..\\mod\\note.js","name":"offset","original":{"line":93,"column":33},"generated":{"line":1,"column":1644}},{"source":"..\\mod\\note.js","name":"top","original":{"line":93,"column":42},"generated":{"line":1,"column":1653}},{"source":"..\\mod\\note.js","name":"addClass","original":{"line":94,"column":12},"generated":{"line":1,"column":1657}},{"source":"..\\mod\\note.js","name":"addClass","original":{"line":94,"column":12},"generated":{"line":1,"column":1659}},{"source":"..\\mod\\note.js","original":{"line":94,"column":21},"generated":{"line":1,"column":1668}},{"source":"..\\mod\\note.js","name":"data","original":{"line":94,"column":34},"generated":{"line":1,"column":1681}},{"source":"..\\mod\\note.js","original":{"line":94,"column":39},"generated":{"line":1,"column":1686}},{"source":"..\\mod\\note.js","original":{"line":94,"column":49},"generated":{"line":1,"column":1695}},{"source":"..\\mod\\note.js","name":"x","original":{"line":94,"column":50},"generated":{"line":1,"column":1696}},{"source":"..\\mod\\note.js","name":"evtX","original":{"line":94,"column":52},"generated":{"line":1,"column":1698}},{"source":"..\\mod\\note.js","name":"y","original":{"line":94,"column":58},"generated":{"line":1,"column":1700}},{"source":"..\\mod\\note.js","name":"evtY","original":{"line":94,"column":60},"generated":{"line":1,"column":1702}},{"source":"..\\mod\\note.js","name":"on","original":{"line":95,"column":7},"generated":{"line":1,"column":1708}},{"source":"..\\mod\\note.js","original":{"line":95,"column":10},"generated":{"line":1,"column":1711}},{"source":"..\\mod\\note.js","original":{"line":95,"column":21},"generated":{"line":1,"column":1721}},{"source":"..\\mod\\note.js","name":"removeClass","original":{"line":96,"column":13},"generated":{"line":1,"column":1732}},{"source":"..\\mod\\note.js","name":"removeClass","original":{"line":96,"column":13},"generated":{"line":1,"column":1734}},{"source":"..\\mod\\note.js","original":{"line":96,"column":25},"generated":{"line":1,"column":1746}},{"source":"..\\mod\\note.js","name":"removeData","original":{"line":96,"column":38},"generated":{"line":1,"column":1759}},{"source":"..\\mod\\note.js","original":{"line":96,"column":49},"generated":{"line":1,"column":1770}},{"source":"..\\mod\\note.js","original":{"line":99,"column":6},"generated":{"line":1,"column":1779}},{"source":"..\\mod\\note.js","original":{"line":99,"column":6},"generated":{"line":1,"column":1781}},{"source":"..\\mod\\note.js","name":"on","original":{"line":99,"column":14},"generated":{"line":1,"column":1789}},{"source":"..\\mod\\note.js","original":{"line":99,"column":17},"generated":{"line":1,"column":1792}},{"source":"..\\mod\\note.js","original":{"line":99,"column":30},"generated":{"line":1,"column":1804}},{"source":"..\\mod\\note.js","name":"e","original":{"line":99,"column":39},"generated":{"line":1,"column":1813}},{"source":"..\\mod\\note.js","original":{"line":100,"column":8},"generated":{"line":1,"column":1816}},{"source":"..\\mod\\note.js","original":{"line":100,"column":8},"generated":{"line":1,"column":1818}},{"source":"..\\mod\\note.js","name":"length","original":{"line":100,"column":22},"generated":{"line":1,"column":1832}},{"source":"..\\mod\\note.js","name":"$","original":{"line":100,"column":32},"generated":{"line":1,"column":1840}},{"source":"..\\mod\\note.js","original":{"line":100,"column":34},"generated":{"line":1,"column":1842}},{"source":"..\\mod\\note.js","name":"offset","original":{"line":100,"column":48},"generated":{"line":1,"column":1856}},{"source":"..\\mod\\note.js","original":{"line":100,"column":55},"generated":{"line":1,"column":1863}},{"source":"..\\mod\\note.js","name":"e","original":{"line":101,"column":13},"generated":{"line":1,"column":1864}},{"source":"..\\mod\\note.js","name":"e","original":{"line":101,"column":13},"generated":{"line":1,"column":1868}},{"source":"..\\mod\\note.js","name":"pageY","original":{"line":101,"column":15},"generated":{"line":1,"column":1870}},{"source":"..\\mod\\note.js","name":"$","original":{"line":101,"column":21},"generated":{"line":1,"column":1876}},{"source":"..\\mod\\note.js","original":{"line":101,"column":23},"generated":{"line":1,"column":1878}},{"source":"..\\mod\\note.js","name":"data","original":{"line":101,"column":37},"generated":{"line":1,"column":1892}},{"source":"..\\mod\\note.js","original":{"line":101,"column":42},"generated":{"line":1,"column":1897}},{"source":"..\\mod\\note.js","name":"y","original":{"line":101,"column":52},"generated":{"line":1,"column":1907}},{"source":"..\\mod\\note.js","name":"e","original":{"line":102,"column":14},"generated":{"line":1,"column":1909}},{"source":"..\\mod\\note.js","name":"e","original":{"line":102,"column":14},"generated":{"line":1,"column":1914}},{"source":"..\\mod\\note.js","name":"pageX","original":{"line":102,"column":16},"generated":{"line":1,"column":1916}},{"source":"..\\mod\\note.js","name":"$","original":{"line":102,"column":22},"generated":{"line":1,"column":1922}},{"source":"..\\mod\\note.js","original":{"line":102,"column":24},"generated":{"line":1,"column":1924}},{"source":"..\\mod\\note.js","name":"data","original":{"line":102,"column":38},"generated":{"line":1,"column":1938}},{"source":"..\\mod\\note.js","original":{"line":102,"column":43},"generated":{"line":1,"column":1943}},{"source":"..\\mod\\note.js","name":"x","original":{"line":102,"column":53},"generated":{"line":1,"column":1953}},{"source":"..\\mod\\note.js","original":{"line":107,"column":8},"generated":{"line":1,"column":1960}},{"source":"..\\mod\\note.js","original":{"line":107,"column":8},"generated":{"line":1,"column":1965}},{"source":"..\\mod\\note.js","name":"msg","original":{"line":107,"column":18},"generated":{"line":1,"column":1974}},{"source":"..\\mod\\note.js","name":"post","original":{"line":109,"column":6},"generated":{"line":1,"column":1977}},{"source":"..\\mod\\note.js","name":"post","original":{"line":109,"column":6},"generated":{"line":1,"column":1979}},{"source":"..\\mod\\note.js","original":{"line":109,"column":11},"generated":{"line":1,"column":1984}},{"source":"..\\mod\\note.js","original":{"line":109,"column":29},"generated":{"line":1,"column":2002}},{"source":"..\\mod\\note.js","original":{"line":110,"column":12},"generated":{"line":1,"column":2003}},{"source":"..\\mod\\note.js","original":{"line":110,"column":12},"generated":{"line":1,"column":2006}},{"source":"..\\mod\\note.js","name":"id","original":{"line":110,"column":17},"generated":{"line":1,"column":2011}},{"source":"..\\mod\\note.js","name":"msg","original":{"line":111,"column":14},"generated":{"line":1,"column":2014}},{"source":"..\\mod\\note.js","name":"msg","original":{"line":111,"column":14},"generated":{"line":1,"column":2019}},{"source":"..\\mod\\note.js","name":"done","original":{"line":112,"column":9},"generated":{"line":1,"column":2023}},{"source":"..\\mod\\note.js","original":{"line":112,"column":14},"generated":{"line":1,"column":2028}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":112,"column":23},"generated":{"line":1,"column":2037}},{"source":"..\\mod\\note.js","original":{"line":113,"column":24},"generated":{"line":1,"column":2040}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":113,"column":9},"generated":{"line":1,"column":2044}},{"source":"..\\mod\\note.js","name":"status","original":{"line":113,"column":13},"generated":{"line":1,"column":2046}},{"source":"..\\mod\\note.js","original":{"line":114,"column":14},"generated":{"line":1,"column":2053}},{"source":"..\\mod\\note.js","original":{"line":114,"column":14},"generated":{"line":1,"column":2055}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":116,"column":14},"generated":{"line":1,"column":2073}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":116,"column":14},"generated":{"line":1,"column":2075}},{"source":"..\\mod\\note.js","name":"errorMsg","original":{"line":116,"column":18},"generated":{"line":1,"column":2077}},{"source":"..\\mod\\note.js","original":{"line":121,"column":7},"generated":{"line":1,"column":2090}},{"source":"..\\mod\\note.js","original":{"line":121,"column":7},"generated":{"line":1,"column":2094}},{"source":"..\\mod\\note.js","name":"msg","original":{"line":121,"column":17},"generated":{"line":1,"column":2103}},{"source":"..\\mod\\note.js","name":"log","original":{"line":122,"column":12},"generated":{"line":1,"column":2106}},{"source":"..\\mod\\note.js","name":"log","original":{"line":122,"column":12},"generated":{"line":1,"column":2114}},{"source":"..\\mod\\note.js","original":{"line":122,"column":16},"generated":{"line":1,"column":2118}},{"source":"..\\mod\\note.js","name":"self","original":{"line":123,"column":8},"generated":{"line":1,"column":2129}},{"source":"..\\mod\\note.js","name":"self","original":{"line":123,"column":8},"generated":{"line":1,"column":2133}},{"source":"..\\mod\\note.js","original":{"line":123,"column":15},"generated":{"line":1,"column":2135}},{"source":"..\\mod\\note.js","name":"post","original":{"line":124,"column":6},"generated":{"line":1,"column":2140}},{"source":"..\\mod\\note.js","name":"post","original":{"line":124,"column":6},"generated":{"line":1,"column":2142}},{"source":"..\\mod\\note.js","original":{"line":124,"column":11},"generated":{"line":1,"column":2147}},{"source":"..\\mod\\note.js","original":{"line":124,"column":29},"generated":{"line":1,"column":2164}},{"source":"..\\mod\\note.js","name":"note","original":{"line":124,"column":30},"generated":{"line":1,"column":2165}},{"source":"..\\mod\\note.js","name":"msg","original":{"line":124,"column":36},"generated":{"line":1,"column":2170}},{"source":"..\\mod\\note.js","name":"done","original":{"line":125,"column":7},"generated":{"line":1,"column":2174}},{"source":"..\\mod\\note.js","original":{"line":125,"column":12},"generated":{"line":1,"column":2179}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":125,"column":21},"generated":{"line":1,"column":2188}},{"source":"..\\mod\\note.js","original":{"line":126,"column":26},"generated":{"line":1,"column":2191}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":126,"column":11},"generated":{"line":1,"column":2195}},{"source":"..\\mod\\note.js","name":"status","original":{"line":126,"column":15},"generated":{"line":1,"column":2197}},{"source":"..\\mod\\note.js","original":{"line":127,"column":16},"generated":{"line":1,"column":2204}},{"source":"..\\mod\\note.js","original":{"line":127,"column":16},"generated":{"line":1,"column":2206}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":129,"column":15},"generated":{"line":1,"column":2222}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":129,"column":15},"generated":{"line":1,"column":2224}},{"source":"..\\mod\\note.js","name":"remove","original":{"line":129,"column":21},"generated":{"line":1,"column":2230}},{"source":"..\\mod\\note.js","name":"fire","original":{"line":130,"column":16},"generated":{"line":1,"column":2239}},{"source":"..\\mod\\note.js","name":"fire","original":{"line":130,"column":16},"generated":{"line":1,"column":2241}},{"source":"..\\mod\\note.js","original":{"line":130,"column":21},"generated":{"line":1,"column":2246}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":131,"column":16},"generated":{"line":1,"column":2259}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":131,"column":16},"generated":{"line":1,"column":2261}},{"source":"..\\mod\\note.js","name":"errorMsg","original":{"line":131,"column":20},"generated":{"line":1,"column":2263}},{"source":"..\\mod\\note.js","original":{"line":137,"column":10},"generated":{"line":1,"column":2277}},{"source":"..\\mod\\note.js","original":{"line":137,"column":10},"generated":{"line":1,"column":2284}},{"source":"..\\mod\\note.js","name":"self","original":{"line":138,"column":8},"generated":{"line":1,"column":2295}},{"source":"..\\mod\\note.js","name":"self","original":{"line":138,"column":8},"generated":{"line":1,"column":2299}},{"source":"..\\mod\\note.js","original":{"line":138,"column":15},"generated":{"line":1,"column":2301}},{"source":"..\\mod\\note.js","name":"post","original":{"line":139,"column":6},"generated":{"line":1,"column":2306}},{"source":"..\\mod\\note.js","name":"post","original":{"line":139,"column":6},"generated":{"line":1,"column":2308}},{"source":"..\\mod\\note.js","original":{"line":139,"column":11},"generated":{"line":1,"column":2313}},{"source":"..\\mod\\note.js","original":{"line":139,"column":32},"generated":{"line":1,"column":2333}},{"source":"..\\mod\\note.js","name":"id","original":{"line":139,"column":33},"generated":{"line":1,"column":2334}},{"source":"..\\mod\\note.js","original":{"line":139,"column":37},"generated":{"line":1,"column":2337}},{"source":"..\\mod\\note.js","name":"id","original":{"line":139,"column":42},"generated":{"line":1,"column":2342}},{"source":"..\\mod\\note.js","name":"done","original":{"line":140,"column":7},"generated":{"line":1,"column":2347}},{"source":"..\\mod\\note.js","original":{"line":140,"column":12},"generated":{"line":1,"column":2352}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":140,"column":21},"generated":{"line":1,"column":2361}},{"source":"..\\mod\\note.js","original":{"line":141,"column":26},"generated":{"line":1,"column":2364}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":141,"column":11},"generated":{"line":1,"column":2368}},{"source":"..\\mod\\note.js","name":"status","original":{"line":141,"column":15},"generated":{"line":1,"column":2370}},{"source":"..\\mod\\note.js","original":{"line":142,"column":16},"generated":{"line":1,"column":2378}},{"source":"..\\mod\\note.js","original":{"line":142,"column":16},"generated":{"line":1,"column":2380}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":143,"column":15},"generated":{"line":1,"column":2398}},{"source":"..\\mod\\note.js","name":"$note","original":{"line":143,"column":15},"generated":{"line":1,"column":2400}},{"source":"..\\mod\\note.js","name":"remove","original":{"line":143,"column":21},"generated":{"line":1,"column":2406}},{"source":"..\\mod\\note.js","name":"fire","original":{"line":144,"column":16},"generated":{"line":1,"column":2415}},{"source":"..\\mod\\note.js","name":"fire","original":{"line":144,"column":16},"generated":{"line":1,"column":2417}},{"source":"..\\mod\\note.js","original":{"line":144,"column":21},"generated":{"line":1,"column":2422}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":146,"column":16},"generated":{"line":1,"column":2436}},{"source":"..\\mod\\note.js","name":"ret","original":{"line":146,"column":16},"generated":{"line":1,"column":2438}},{"source":"..\\mod\\note.js","name":"errorMsg","original":{"line":146,"column":20},"generated":{"line":1,"column":2440}},{"source":"..\\mod\\note.js","name":"module","original":{"line":154,"column":0},"generated":{"line":1,"column":2454}},{"source":"..\\mod\\note.js","name":"exports","original":{"line":154,"column":7},"generated":{"line":1,"column":2461}},{"source":"..\\mod\\note.js","name":"Note","original":{"line":154,"column":15},"generated":{"line":1,"column":2469}},{"source":"..\\mod\\note.js","name":"Note","original":{"line":154,"column":22},"generated":{"line":1,"column":2474}}],"sources":{"..\\mod\\note.js":"require('../../less/note.less');\n\nvar Toast = require('./toast.js').Toast;\nvar Event = require('./event.js');\n\nfunction Note(opts){\n  this.initOpts(opts);\n  this.createNote();\n  this.setStyle();\n  this.bindEvent();\n}\nNote.prototype = {\n  colors: [\n    ['#ea9b35','#efb04e'], // headColor, containerColor\n    ['#dd598b','#e672a2'],\n    ['#eee34b','#f2eb67'],\n    ['#c24226','#d15a39'],\n    ['#c1c341','#d0d25c'],\n    ['#3f78c3','#5591d2']\n  ],\n\n  defaultOpts: {\n    id: '',   //Note的 id\n    $ct: $('#content').length>0?$('#content'):$('body'),  //默认存放 Note 的容器\n    context: 'input here'  //Note 的内容\n  },\n\n  initOpts: function (opts) {\n    this.opts = $.extend({}, this.defaultOpts, opts||{});\n    if(this.opts.id){\n       this.id = this.opts.id;\n    }\n  },\n\n  createNote: function () {\n    var tpl =  '<div class=\"note\">'\n              + '<div class=\"note-head\"><span class=\"username\"></span><span class=\"delete\">&times;</span></div>'\n              + '<div class=\"note-ct\" contenteditable=\"true\"></div>'\n              +'</div>';\n    this.$note = $(tpl);\n    this.$note.find('.note-ct').text(this.opts.context);\n    this.$note.find('.username').text(this.opts.username);\n    this.opts.$ct.append(this.$note);\n    if(!this.id)  this.$note.css('bottom', '10px');  //新增放到右边\n  },\n\n  setStyle: function () {\n    var color = this.colors[Math.floor(Math.random()*6)];\n    this.$note.find('.note-head').css('background-color', color[0]);\n    this.$note.find('.note-ct').css('background-color', color[1]);\n  },\n\n  setLayout: function(){\n    var self = this;\n    if(self.clk){\n      clearTimeout(self.clk);\n    }\n    self.clk = setTimeout(function(){\n      Event.fire('waterfall');\n    },100);\n  },\n\n  bindEvent: function () {\n    var self = this,\n        $note = this.$note,\n        $noteHead = $note.find('.note-head'),\n        $noteCt = $note.find('.note-ct'),\n        $delete = $note.find('.delete');\n\n    $delete.on('click', function(){\n      self.delete();\n    })\n\n    //contenteditable没有 change 事件，所有这里做了模拟通过判断元素内容变动，执行 save\n    $noteCt.on('focus', function() {\n      if($noteCt.html()=='input here') $noteCt.html('');\n      $noteCt.data('before', $noteCt.html());\n    }).on('blur paste', function() {\n      if( $noteCt.data('before') != $noteCt.html() ) {\n        $noteCt.data('before',$noteCt.html());\n        self.setLayout();\n        if(self.id){\n          self.edit($noteCt.html())\n        }else{\n          self.add($noteCt.html())\n        }\n      }\n    });\n\n    //设置笔记的移动\n    $noteHead.on('mousedown', function(e){\n      var evtX = e.pageX - $note.offset().left,   //evtX 计算事件的触发点在 dialog内部到 dialog 的左边缘的距离\n          evtY = e.pageY - $note.offset().top;\n      $note.addClass('draggable').data('evtPos', {x:evtX, y:evtY}); //把事件到 dialog 边缘的距离保存下来\n    }).on('mouseup', function(){\n       $note.removeClass('draggable').removeData('pos');\n    });\n\n    $('body').on('mousemove', function(e){\n      $('.draggable').length && $('.draggable').offset({\n        top: e.pageY-$('.draggable').data('evtPos').y,    // 当用户鼠标移动时，根据鼠标的位置和前面保存的距离，计算 dialog 的绝对位置\n        left: e.pageX-$('.draggable').data('evtPos').x\n      });\n    });\n  },\n\n  edit: function (msg) {\n    var self = this;\n    $.post('/api/notes/edit',{\n        id: this.id,\n        note: msg\n      }).done(function(ret){\n      if(ret.status === 0){\n        Toast('update success');\n      }else{\n        Toast(ret.errorMsg);\n      }\n    })\n  },\n\n  add: function (msg){\n    console.log('addd...');\n    var self = this;\n    $.post('/api/notes/add', {note: msg})\n      .done(function(ret){\n        if(ret.status === 0){\n          Toast('add success');\n        }else{\n          self.$note.remove();\n          Event.fire('waterfall')\n          Toast(ret.errorMsg);\n        }\n      });\n    //todo\n  },\n\n  delete: function(){\n    var self = this;\n    $.post('/api/notes/delete', {id: this.id})\n      .done(function(ret){\n        if(ret.status === 0){\n          Toast('delete success');\n          self.$note.remove();\n          Event.fire('waterfall')\n        }else{\n          Toast(ret.errorMsg);\n        }\n    });\n\n  }\n\n};\n\nmodule.exports.Note = Note;\n\n"},"lineCount":null}},"hash":"73672b2cc581d1995fe169f6d7a23530","cacheData":{"env":{}}}